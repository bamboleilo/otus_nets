# **Развертывание коммутируемой сети с резервными каналами**

### **Задание**
1. Создание сети и настройка основных параметров устройства
2. Выбор корневого моста
3. Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
4. Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета 

### **Решение:**
Часть 1: Создание сети и настройка основных параметров устройства.
1. Создание макета в симуляторе Packettracert, таблицы адресации, настройка базовых параметров устройств, проверка работы.
2. Проверка связи.

Часть 2: Определение корневого моста
1. Отключить все порты на коммутаторах.
2. Настройть подключенные порты в качестве транковых.
3. Включить порты F0/2 и F0/4 на всех коммутаторах.
4. Отобразить данные протокола spanning-tree.

Часть 3:	Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов
1. Определение коммутатора с заблокированным портом.
2. Изменение стоимости порта.
3. Просмотр изменения протокола spanning-tree.
4. Удалить изменения стоимости порта.

Часть 4:	Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов

# **Часть 1: Создание сети и настройка основных параметров устройства**

### **1. Создание макета в симуляторе Packettracert, таблицы адресации, настройка базовых параметров устройств, проверка работы**

Схема в Packettracert

![image](https://user-images.githubusercontent.com/39755453/110995539-53437a00-839c-11eb-8c3f-0a17251206b7.png)

Таблица адресации

|  Устройство  | Интерфейс | IP-адрес      | Маска подсети   |
|--------------|-----------|---------------|-----------------|
| S1           | VLAN1     | 192.168.1.1   | 255.255.255.0   |
| S2           | VLAN1     | 192.168.1.2   | 255.255.255.0   |
| S3           | VLAN1     | 192.168.1.3   | 255.255.255.0   |
 
Пример настройки базовых параметров для S1

```
hostname S1
no ip domain-lookup
enable secret class
line vty 0 15
 password cisco
 login
 transport input all
banner motd #Authorized Access Only!#
int vlan 1
 no sh
 ip address 192.168.1.1 255.255.255.0
int ra fa0/1-24
 sh
int ra gi0/1-2
 sh
int ra fa0/1-4
 sw mode trunk
int ra fa0/2, fa0/4
 no sh
```
Аналогично проводим настройка и коммутаторами S2 и S3

### **2. Проверка связи.**

Проверяем эхо-запросы от коммутатора S1 на коммутаторы S2 и S3

![image](https://user-images.githubusercontent.com/39755453/110992848-5177b780-8398-11eb-8476-632701a03225.png)

Проверяем эхо-запросы от коммутатора S2 на коммутатор S3

![image](https://user-images.githubusercontent.com/39755453/110993139-b7643f00-8398-11eb-9767-a424bb4ac257.png)

# **Часть 2: Определение корневого моста**

### **1. Отключить все порты на коммутаторах**

Данные настройки приведены в базовых

### **2. Настройть подключенные порты в качестве транковых.**

Данные настройки приведены в базовых

### **3. Включить порты F0/2 и F0/4 на всех коммутаторах.**

Данные настройки приведены в базовых

### **4. Отобразить данные протокола spanning-tree.**

Данные настроек протокола spanning-tree на S1

![image](https://user-images.githubusercontent.com/39755453/110994312-6ead8580-839a-11eb-95df-0020e4aecb15.png)

Данные настроек протокола spanning-tree на S2

![image](https://user-images.githubusercontent.com/39755453/110994444-9b619d00-839a-11eb-8316-6741a7a384be.png)

Данные настроек протокола spanning-tree на S3

![image](https://user-images.githubusercontent.com/39755453/110994538-ba602f00-839a-11eb-8f29-7280aba29380.png)

Исходя из настроек, видно, что коммутатор S2 выбран в качестве корневого, так как имеет наименьший mac-address. Порты на S2 fa0/2 и fa0/4 являются назначенными; порты на S1: fa0/2 - корневой (так как прямой порт в корневой коммутатор S2), fa0/4 - назначенный; порты на S3: fa0/2 - корневой (так как прямой порт в корневой корневой коммутатор S2), fa0/4 - альтернативный (выбран в качестве альтернативного, так как mac-address S1 имеет меньшее значение, чем на S3).


# **Часть 3:	Наблюдение за процессом выбора протоколом STP порта, исходя из стоимости портов**

### **1. Определение коммутатора с заблокированным портом.**

S3#sh sp
VLAN0001
  Spanning tree enabled protocol ieee
  Root ID    Priority    32769
             Address     0001.6373.C0E9
             Cost        19
             Port        2(FastEthernet0/2)
             Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec

  Bridge ID  Priority    32769  (priority 32768 sys-id-ext 1)
             Address     0009.7C15.9BA6
             Hello Time  2 sec  Max Age 20 sec  Forward Delay 15 sec
             Aging Time  20

Interface        Role Sts Cost      Prio.Nbr Type
---------------- ---- --- --------- -------- --------------------------------
Fa0/2            Root FWD 19        128.2    P2p
Fa0/4            Altn BLK 19        128.4    P2p

span style="color:blue">some *This is Blue italic.* text</span>

### **2. Изменение стоимость порта.**

### **3. Просмотр изменения протокола spanning-tree.**

### **4. Удалить изменения стоимости порта.**

# **Часть 4:	Наблюдение за процессом выбора протоколом STP порта, исходя из приоритета портов**
